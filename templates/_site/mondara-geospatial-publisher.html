<p>This workflow demonstrates publishing geospatial data read into FME (in this example from a Shapefile containing points) to update (by replacing) an existing Socrata Mondara Geospatial Dataset.</p>

<p><a href="https://github.com/socrata/connectors/blob/master/Mondara%20Geospatial%20Publisher/img/geospatial_publisher_preview.png">View preview of workflow</a></p>

<h3 id="quickstart">Quickstart</h3>

<p>Follow these steps to get the example workflow working to update a dataset. Once you have it working you can swap out the FME Reader with a reader for the geospatial data you wish to publish.</p>

<ol>
  <li>[Download the workflow using the Download link above and open it in FME Desktop.</li>
  <li>Create a new Geospatial Dataset on your Socrata data portal. Refer to <a href="https://support.socrata.com/hc/en-us/articles/202950488-Host-geospatial-files-using-Socrata-Mondara">this guide</a> for information on Geospatial datasets.</li>
  <li>Copy the dataset ID of the Geospatial dataset you created in Step 1. To obtain the dataset ID, navigate to the dataset in your web browser. In the address bar the dataset ID is the code at the end of the URL in the form <code>xxxx-xxxx</code>. For example, for the dataset https://data.seattle.gov/Public-Safety/Fire-911/m985-ywaw, it’s identifier would be <code>m985-ywaw</code>.</li>
  <li>Update the following User Parameters in the Navigator panel in the upper left of FME:
    <ul>
      <li>socrata_username  </li>
      <li>socrata_password</li>
      <li>socrata_dataset_uid (dataset ID obtained in Step 3)</li>
      <li>socrata_domain (e.g. data.seattle.gov)</li>
    </ul>
  </li>
  <li>Run the workflow and refresh the page for the Geospatial Dataset to verify that it was updated to show a set of points in Austin, Texas (when you click on a point you should see the 7 attributes listed under the Writer called ‘facilties’ in the workflow template).<br />
<strong>NOTE:</strong> sometimes it takes a up to a minute or two for the changes to be reflected in the dataset. </li>
</ol>

<h3 id="adapting-the-workflow-for-your-geospatial-data">Adapting the workflow for your geospatial data</h3>

<p>To publish geospatial data from another source such as geospatial database or an ArcGIS server endpoint (ESRI-JSON) make the following changes:</p>

<ol>
  <li>Replace the ‘faciltiies’ reader with the appropriate Reader in FME (e.g. ESRI-JSON reader)</li>
  <li>Update the Writer on the right (called ‘facilties’) to include the appropriate attributes you wish to publish. Double click on the Writer, click the Attribute Definition tab, and remove all the existing attributes. Re-add the attributes you wish to publish. You can add all attributes from a Reader by right-clicking the Writer and selecting ‘Copy attributes from Feature Type’.<br />
<strong>NOTE:</strong> no attributes can be longer than 10 characters so you may need to use an <a href="http://docs.safe.com/fme/html/FME_Transformers/Default.htm#Transformers/attributerenamer.htm">AttributeRenamer</a> transformer to rename attributes longer than 10 characters</li>
  <li>If the geospatial data you are reading is not point data then you will need to double-click on the Writer and select the appropriate item from the ‘Allowed Geometries’ dropdown menu.</li>
  <li>Run the workflow!</li>
</ol>
